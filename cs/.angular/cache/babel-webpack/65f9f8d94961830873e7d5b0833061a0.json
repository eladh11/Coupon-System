{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/admin.service\";\nimport * as i2 from \"src/app/services/company.service\";\nimport * as i3 from \"src/app/services/customer.service\";\nimport * as i4 from \"src/app/services/login.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/material/grid-list\";\nimport * as i7 from \"@angular/material/card\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/material/button\";\n\nfunction AllCouponsComponent_mat_grid_tile_3_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2, \" \\u00A0\\u00A0\\u00A0 \\uD83D\\uDD25\\uD83D\\uDD25HOT ITEM\\uD83D\\uDD25\\uD83D\\uDD25 \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AllCouponsComponent_mat_grid_tile_3_button_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function AllCouponsComponent_mat_grid_tile_3_button_26_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const coupon_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.purchaseCoupon(ctx_r5.customerID, coupon_r1);\n    });\n    i0.ɵɵtext(1, \" Buy Me!\\u00A0\");\n    i0.ɵɵelement(2, \"i\", 12);\n    i0.ɵɵtext(3, \"\\u00A0\\u00A0\\u00A0 \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AllCouponsComponent_mat_grid_tile_3_span_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 13);\n    i0.ɵɵtext(1, \" \\u00A0\\u00A0\\u00A0\\u00A0\\u00A0 login to Buy... \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction AllCouponsComponent_mat_grid_tile_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-grid-tile\");\n    i0.ɵɵelementStart(1, \"mat-card\", 2);\n    i0.ɵɵtemplate(2, AllCouponsComponent_mat_grid_tile_3_div_2_Template, 3, 0, \"div\", 3);\n    i0.ɵɵelementStart(3, \"div\", 4);\n    i0.ɵɵelement(4, \"img\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-card-header\");\n    i0.ɵɵelementStart(6, \"mat-card-title\", 6);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"mat-card-content\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"mat-card-content\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"mat-card-content\");\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"mat-card-content\");\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"mat-card-content\");\n    i0.ɵɵtext(18);\n    i0.ɵɵpipe(19, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"mat-card-content\");\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"mat-card-content\");\n    i0.ɵɵtext(23);\n    i0.ɵɵpipe(24, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"mat-card-actions\");\n    i0.ɵɵtemplate(26, AllCouponsComponent_mat_grid_tile_3_button_26_Template, 4, 0, \"button\", 7);\n    i0.ɵɵelementStart(27, \"a\", 8);\n    i0.ɵɵtext(28, \" More Details \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(29, AllCouponsComponent_mat_grid_tile_3_span_29_Template, 2, 0, \"span\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const coupon_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", coupon_r1.price % 5 === 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"src\", \"../../../assets/images/\", coupon_r1.id, \".jpg\", i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\", coupon_r1.title, \":\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Category: \", coupon_r1.category, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Title: \", coupon_r1.title, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Description: \", coupon_r1.description, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Start Date: \", i0.ɵɵpipeBind2(16, 13, coupon_r1.startDate, \"dd/MM/yyyy\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" End Date: \", i0.ɵɵpipeBind2(19, 16, coupon_r1.endDate, \"dd/MM/yyyy\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" Left in Stock: \", coupon_r1.amount, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" Price: \", i0.ɵɵpipeBind2(24, 19, coupon_r1.price, \"USD\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.type === \"customer\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/coupon/\", coupon_r1.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.type !== \"customer\");\n  }\n}\n\nexport let AllCouponsComponent = /*#__PURE__*/(() => {\n  class AllCouponsComponent {\n    constructor(adminService, companyService, customerService, loginService, router) {\n      this.adminService = adminService;\n      this.companyService = companyService;\n      this.customerService = customerService;\n      this.loginService = loginService;\n      this.router = router;\n    }\n\n    ngOnInit() {\n      this.type = this.loginService.type;\n      this.companyService.getAllCoupons().subscribe(data => {\n        this.coups = data;\n      }, err => {\n        alert(err.message);\n      });\n      this.adminService.getOneCustomerByEmail(this.loginService.email).subscribe(c => {\n        this.customerID = c.id;\n      }, err => alert(err.message));\n    }\n\n    purchaseCoupon(customerID, coupon) {\n      if (confirm('Confirm buying: ' + coupon.title + ' Proceed?')) {\n        this.customerService.purchaseCoupon(customerID, coupon).subscribe(data => {\n          alert('Coupon: ' + coupon.title + ' has purchase, Enjoy your Coupon!');\n          this.router.navigateByUrl('/all-coupons');\n        }, err => {\n          if (this.loginService.type == 'customer') {\n            alert('you cannot buy the same coupon more than once!');\n          } else {\n            alert('you must Login to the website!');\n            this.router.navigateByUrl('/login');\n          }\n        });\n      }\n    }\n\n  }\n\n  AllCouponsComponent.ɵfac = function AllCouponsComponent_Factory(t) {\n    return new (t || AllCouponsComponent)(i0.ɵɵdirectiveInject(i1.AdminService), i0.ɵɵdirectiveInject(i2.CompanyService), i0.ɵɵdirectiveInject(i3.CustomerService), i0.ɵɵdirectiveInject(i4.LoginService), i0.ɵɵdirectiveInject(i5.Router));\n  };\n\n  AllCouponsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AllCouponsComponent,\n    selectors: [[\"app-all-coupons\"]],\n    decls: 4,\n    vars: 1,\n    consts: [[\"cols\", \"3\", \"rowHeight\", \"1:2\"], [4, \"ngFor\", \"ngForOf\"], [1, \"example-card\"], [\"class\", \"ribbon ribbon-top-right\", 4, \"ngIf\"], [1, \"img\"], [\"mat-card-image\", \"\", 3, \"src\"], [2, \"font-size\", \"40px\", \"padding\", \"30px\"], [\"mat-button\", \"\", \"style\", \"background-color: greenyellow; color: white\", 3, \"click\", 4, \"ngIf\"], [3, \"routerLink\"], [\"mat-button\", \"\", \"style\", \"background-color: white; color: red\", 4, \"ngIf\"], [1, \"ribbon\", \"ribbon-top-right\"], [\"mat-button\", \"\", 2, \"background-color\", \"greenyellow\", \"color\", \"white\", 3, \"click\"], [1, \"bi\", \"bi-bag\"], [\"mat-button\", \"\", 2, \"background-color\", \"white\", \"color\", \"red\"]],\n    template: function AllCouponsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-grid-list\", 0);\n        i0.ɵɵelementStart(1, \"mat-card-title\");\n        i0.ɵɵtext(2, \"All Coupons: \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(3, AllCouponsComponent_mat_grid_tile_3_Template, 30, 22, \"mat-grid-tile\", 1);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.coups);\n      }\n    },\n    directives: [i6.MatGridList, i7.MatCardTitle, i8.NgForOf, i6.MatGridTile, i7.MatCard, i8.NgIf, i7.MatCardImage, i7.MatCardHeader, i7.MatCardContent, i7.MatCardActions, i5.RouterLinkWithHref, i9.MatButton],\n    pipes: [i8.DatePipe, i8.CurrencyPipe],\n    styles: [\"mat-grid-tile[_ngcontent-%COMP%]{background:white}mat-card-title[_ngcontent-%COMP%]{text-align:center;margin-top:100px;font-weight:700}h1[_ngcontent-%COMP%]{text-align:center;color:#000;font-family:arial,sans-serif;font-size:30px;font-weight:700;margin-top:50px}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{text-align:center;max-width:100%;height:auto;width:350px;height:250px;border-radius:5px;box-shadow:12px 12px 8px #000}mat-card-content[_ngcontent-%COMP%]{font-family:Lato;font-size:x-large}.example-card[_ngcontent-%COMP%]{max-width:500px;margin:4px;display:inline-block;size:100px}mat-card-title[_ngcontent-%COMP%]{padding:15px;-webkit-text-decoration-line:underline;text-decoration-line:underline}.ribbon[_ngcontent-%COMP%]{width:150px;height:150px;overflow:hidden;position:absolute}.ribbon[_ngcontent-%COMP%]:before, .ribbon[_ngcontent-%COMP%]:after{position:absolute;z-index:-1;content:\\\"\\\";display:block;border:5px solid black}.ribbon[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;display:block;width:225px;padding:15px 0;background-color:red;box-shadow:0 5px 10px #0000001a;color:#fff;font:700 18px/1 Lato,sans-serif;text-shadow:0 1px 1px rgba(0,0,0,.2);text-transform:uppercase;text-align:center}.ribbon-top-right[_ngcontent-%COMP%]{top:-10px;right:-10px}.ribbon-top-right[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{left:-25px;top:30px;transform:rotate(45deg)}.ribbon-top-right[_ngcontent-%COMP%]:before, .ribbon-top-right[_ngcontent-%COMP%]:after{border-top-color:transparent;border-right-color:transparent}.ribbon-top-right[_ngcontent-%COMP%]:before{top:0;left:0}.ribbon-top-right[_ngcontent-%COMP%]:after{bottom:0;right:0}.cncn[_ngcontent-%COMP%]{display:flex;margin-bottom:50px}.categories[_ngcontent-%COMP%]{width:150px;height:400px;margin-left:15px;margin-top:50px;display:flex;flex-direction:column;text-align:center;justify-content:space-evenly;border-right:1px solid #ccc}.categories[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:400;text-align:left;outline:none;cursor:pointer}a[_ngcontent-%COMP%]{color:#000;font-style:italic;padding:0 10px;font-size:17px;box-shadow:12px 12px 8px #000}a[_ngcontent-%COMP%]:hover{color:#504f4f}\"]\n  });\n  return AllCouponsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}